<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>PDF Viewer with Double Tap Zoom and Page Numbers</title>
    <style>
        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
            font-family: Arial, sans-serif;
        }
        #pdf-container {
            width: 95%;
            height: 100%;
            margin: 0 auto;
            position: relative;
            background-color: #ffffff;
        }
        #pdf-render {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            overflow-y: auto;
            height: 100%;
            padding: 20px 0;
        }
        #pdf-render canvas {
            max-width: 100%;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 10px;
        }
        .page-number {
            position: fixed;
            bottom: 10px;
            right: 20px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 14px;
            z-index: 100;
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
    <script src="https://hammerjs.github.io/dist/hammer.min.js"></script>
</head>
<body>
    <div id="pdf-container">
        <div id="pdf-render"></div>
        <div class="page-number" id="page-number">Page 1</div>
    </div>

    <script>
        class PDFViewer {
            constructor() {
                this.pdfContainer = document.getElementById('pdf-render');
                this.pageNumberDisplay = document.getElementById('page-number');
                this.pdfUrl = 'Mil1.pdf';
                this.currentPage = 1;
                this.pdfDocument = null;
                this.scale = 1; // Default scale
                this.isZoomedIn = false; // State for zoom
                this.initHammerJS();

                this.loadPDF();
            }

            async loadPDF() {
                try {
                    pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.worker.min.js';
                    const loadingTask = pdfjsLib.getDocument(this.pdfUrl);
                    this.pdfDocument = await loadingTask.promise;
                    this.renderPage(this.currentPage);
                } catch (error) {
                    console.error('Error loading PDF:', error);
                }
            }

            async renderPage(pageNumber) {
                try {
                    const page = await this.pdfDocument.getPage(pageNumber);
                    const canvas = document.createElement('canvas');
                    const context = canvas.getContext('2d');
                    this.pdfContainer.innerHTML = ''; // Clear the container
                    this.pdfContainer.appendChild(canvas);

                    const viewport = page.getViewport({ scale: this.scale });
                    canvas.height = viewport.height;
                    canvas.width = viewport.width;

                    const renderContext = {
                        canvasContext: context,
                        viewport: viewport,
                    };

                    await page.render(renderContext);
                    this.updatePageNumber();
                } catch (error) {
                    console.error('Error rendering page:', error);
                }
            }

            updatePageNumber() {
                this.pageNumberDisplay.textContent = `Page ${this.currentPage} of ${this.pdfDocument.numPages}`;
            }

            initHammerJS() {
                const hammer = new Hammer(this.pdfContainer);

                hammer.get('doubletap').set({ posThreshold: 30 });

                hammer.on('tap', (e) => {
                    this.scale = this.isZoomedIn ? 1 : 1.5; // Toggle zoom in and out
                    this.isZoomedIn = !this.isZoomedIn;
                    this.renderPage(this.currentPage);
                });

                hammer.on('doubletap', (e) => {
                    this.scale = this.isZoomedIn ? 2 : 1; // Toggle between zoom out and normal
                    this.isZoomedIn = !this.isZoomedIn;
                    this.renderPage(this.currentPage);
                });

                hammer.on('swipeleft', () => this.changePage(1)); // Next page
                hammer.on('swiperight', () => this.changePage(-1)); // Previous page
            }

            changePage(offset) {
                const newPage = this.currentPage + offset;
                if (newPage >= 1 && newPage <= this.pdfDocument.numPages) {
                    this.currentPage = newPage;
                    this.renderPage(newPage);
                }
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            const pdfViewer = new PDFViewer();
        });
    </script>
</body>
</html>
